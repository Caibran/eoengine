// Note: this test requires the environment to have ThreadPoolThreads = LoginQueueSize = 4
//
$version = 28

$expectedConcurrentLogins = 4

$account_name = "botacc" + $botindex
$account_pass = "BotP@ssw0rd" + $botindex

$LOGIN_OK = 3
$LOGIN_BUSY = 6

print ("SERVER=" + $host + " Logging in " + $account_name)
sleep(100 * $botindex)

$loginRes = Login($account_name, $account_pass)
if ($loginRes != $LOGIN_OK) {
    if ($botindex > $expectedConcurrentLogins)
    {
        if ($loginRes != $LOGIN_BUSY)
            error("Expected busy login for bot " + $botindex + " but was " + $loginRes)
    }
    else
    {
        if ($loginRes != $LOGIN_OK)
            error("Expected ok login for bot " + $botindex + " but was " + $loginRes)
    }
}
